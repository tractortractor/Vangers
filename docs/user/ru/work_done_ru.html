<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<h2>Общее</h2>

<h4>MSVC компиляция</h4>
<ul>
	<li>MSVC не мог скомплировать релиз 2016. Теперь этот компилятор поддерживается.</li>
</ul>

<h4>Документация</h4>
<ul>
	<li>Задокументированы все найденные макросы, которые ни во что не расширяются и использованы с директивами "#ifdef"/"#ifndef". Смотрите "debug_observations.html".</li>
	<li>Задокументировано большинство самых часто используемых RNG функций/классов/макросов. Смотрите "rand.html".</li>
	<li>Написана инструкция для компиляции с MSVC. Смотрите "compile.html".</li>
	<li>Создана таблица с перечнем всех типов предметов. Полезно для разработки и отладки. Смотрите "vangers_item_types.xls". Также доступно в форматах ".ods" и Excel 2003 ".xml".</li>
	<li>Создана таблица с перечнем всех 3d модели. Полезно для их модификаций. Смотрите "items_models.xls". Также доступно в форматах ".ods" и Excel 2003 ".xml".</li>
</ul>



<br/>
<br/>
<br/>



<h2>Изменения кода</h2>

<h3>Все билды</h3>

<h4>Управление</h4>
<ul>
	<li>Во многих местах использовалась старая система управления. Теперь везде используется система управления SDL библиотеки.</li>
	<li>Теперь в большинстве случаев игра получает состояние управления из SDL библиотеки, записывает это состояние в свои собственные таблицы, а затем использует данные из этих таблиц, чтобы определить, какое действие нужно произвести. Ранее игра напрямую опрашивала SDL библиотеку. Это изменение сделано, чтобы можно было проигрывать реплеи, не меняя переменные SDL библиотеки.</li>
</ul>

<h4>Аргументы командной строки</h4>
<ul>
	<li>Восстановлено использование аргументов командной строки.</li>
</ul>

<h4>Поддержка джойстика</h4>
<ul>
	<li>Исправлен тип управления джойстика "Джойстик".</li>
	<li>Добавлен второй экран в опциях джойстика, возможность назначать ось и чувствительность.</li>
	<li>Изменено поведение кнопки "альтернативная функция рукоятки", восстановлена возможность назначать действия на альтернативные движения джойстика.</li>
</ul>

<h4>Мини-карта</h4>
<ul>
	<li>Переписана функция, которая возвращает координаты определенного объекта. Теперь она немного медленнее в некоторых случаях, но ее стало намного проще поддерживать, и теперь она также возвращает направление и наклон объекта.</li>
	<li>Больше типов объектов можно увидеть на мини-карте.</li>
	<li>Для мини-карты добавлена отметка в виде стрелки, которая меняет свою форму в зависимости от направления и наклона объекта.</li>
	<li>Изменены все отметки мини-карты, кроме отметки куклы.</li>
</ul>

<h4>Небольшие изменения в работе Бут Сектора</h4>
<ul>
	<li>Теперь игра проверяет, есть ли Раббокс в инвентаре, в момент телепортации при помощи Бут Сектора. Если есть, он удаляется из мехоса, а затем в мехосе назначаения создается новый с теми же свойствами.</li>
</ul>



<br/>



<h3>VANGERS_DEBUG</h3>
<ul>
	<li>Все MSVC макросы "_DEBUG" заменены на макрос "VANGERS_DEBUG".</li>
	<li>Теперь игра использует библиотеку GetRSS для получения количества байт оперативной памяти, которые используется игрой. Доступно здесь: <a href="http://nadeausoftware.com/articles/2012/07/c_c_tip_how_get_process_resident_set_size_physical_memory_use">http://nadeausoftware.com/articles/2012/07/c_c_tip_how_get_process_resident_set_size_physical_memory_use</a>.</li>
	<li>Теперь игра использует библиотеку Boost для сохранения новых перменных ".prm" файлов. Доступно здесь: <a href="https://www.boost.org/">https://www.boost.org/</a></li>
</ul>

<h3>SICHER_DEBUG</h3>
<ul>
	<li>Раскомментирован и немного изменен код, отвечающий за переключатель Жабли.</li>
</ul>

<h3>UNIT_DEBUG_VIEW</h3>
<ul>
	<li>Раскомментирован код, отвечающий за прорисовку луча направления.</li>
	<li>Раскомментирован код, отвечающий за вывод следующей подсказки.</li>
</ul>

<h3>iMOVE_MOUSE_OBJECTS</h3>
<ul>
	<li>Управление изменено, чтобы избежать конфликтов.</li>
	<li>Добавлена возможность двигать экран.</li>
</ul>

<h3>_ACI_MAP_TESTING_</h3>
<ul>
	<li>Добавлена возможность менять тесты в игре. Ранее тест определялся во время компиляции.</li>
</ul>

<h3>_ACI_SHOW_BUGS_ON_MAP_</h3>
<ul>
	<li>Изменен цвет обозначения бибов на миникарте с оранжевого на зеленый.</li>
</ul>

<h3>DIAGEN_TEST</h3>
<ul>
	<li>Теперь диалоги загружаются из файлов "diagen.text"/"diagen_eng.text" для русских/английских текстов соответственно. Ранее загружалась из "data.lst".</li>
	<li>Исправлен код, отвечающий за консольный ввод.</li>
	<li>
		<p>Изменена система диалоговых переменных. Цитата из "debug_observations.html":</p>
		<p>
		<q>
			Изначально 2 массива переменных были использованы диалоговой системой. Первый содержал глобальные переменные, а второй - диалоговые. Диалоговые функции напрямую опрашивали глобальные переменные, в то время как консольные команды модифицировали диалоговые. Диалоговые переменные никогда не использовались, так что следующие команды были бесполезными.
			<br>
			В этой версии диалоговые функции используют диалоговые переменные. Каждый раз, когда диалог начинается или обновляется через консольную команду, диалоговые переменные получают данные из глобальных. Также появился фильтрующий массив, который используется, чтобы предотвратить обновление диалоговых переменных, которые были заданы вручную.
		</q>
		</p>
	</li>
	<li>Добавлено больше консольных команд, чтобы добавить функциональность и покрыть новую систему диалоговых переменных</li>
</ul>



<h3>zRECORDER_ENABLED</h3>
<ul>
	<li>Восстановлены и тщательно протестированы запись и проигрывание реплеев.</li>
	<li>Теперь семя RNG генерируется при начале новой игры и сохраняется в файле реплея. Изначально всегда использовалось семя RNG по умолчанию.</li>
	<li>Теперь управление сохраняется в файле реплея. Изначально всегда использовалось управление по умолчанию.</li>
	<li>Добавлена возможность красть вещи сквозь стены во время записи или проигрывания реплея.</li>
</ul>



<h3>Незначительные билды</h3>
<ul>
	<li>Огромное количество небольших исправлений для множества других незначительных билдов.</li>
</ul>